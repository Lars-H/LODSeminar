<!doctype html>
<html>
<head>
	<title>Cepler</title>
	<meta charset="iso-8859-1">	
	<link rel=stylesheet type=text/css href="{{ url_for('static', filename='design.css') }}">
	<link href='https://fonts.googleapis.com/css?family=Raleway:400,100' rel='stylesheet' type='text/css'>
</head>

<body>

<!-- NAVIGATION -->	
<div id="nav_container">
	<nav id="primary_nav_wrap">
	<ul class="menu_item">
	  <li><a href="/"><it>Try it!</it></a>
	  <li><a href="#"><it>Resources</it></a>
	    <ul>
	      <li><a href="/api"><it>API</it></a></li>
	      <li><a href="/ontology"><it>Ontology</it></a></li>
	      <li><a href="/datasources"><it>Data Sources</it></a></li>
	    </ul>
	  </li>
	  <li><a href="/about"><it>About</it></a></li>
	</ul>
	</nav>
</div>
<!--Buffer Div-->
<div id="buffer_div"> 
</div> 


<!-- Main Div -->	
<div id="main_div"> 

	<div id="controls" align="center">
		<h1>Try out Cepler!</h1>
	<form>
	<div align=center>
		<div style="height:60px;">
			<input id="textbox"></input>
			<select id ="slct" >
			<option selected> Choose a unit... </option>
			  <optgroup label="Weight">
			  	<option value="t">t</option>
			    <option value="kg">kg</option>
			    <option value="g">g</option>
			  </optgroup>
			  <optgroup label="Distance">
			    <option href="https://www.wikidata.org/wiki/Q828224" value="km">km</option>
			    <option value="m">m</option>
			    <option value="cm">cm</option>
			  </optgroup>
			    <optgroup label="Money">
			    <option value="euro">Euro</option>
			    <option value="usd">US-Dollar</option>
			  </optgroup>
			</select>
		</div>
	</form>
	</div> 
	<div id="button_try_div" align="center" >
		<button type="button" class="button" onclick="tryItClick()" >Try it!</button>
	</div>
	</div>

</div>

<!-- Result-->
<div id="resultDiv" align="center">
	<h2 style="color: #04B45F;"id="display_result"></h2>
</div>





<!-- Footer -->	
<div style="height:50px;"></div>
<footer>
	<div id="footerText" align=center>
	(C) Ben, Nico, Lars
	</div>
</footer>


</body>


<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
	window.jQuery || document.write('<script src="{{url_for('static', filename='jquery.js') }}">\x3C/script>')
</script>

<script type=text/javascript>
  $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
</script>


<script type="text/javascript">
	function tryItClick()
	{
		//First: check input validity
		var value = document.getElementById('textbox').value;
		var selectedUnit = document.getElementById('slct').value;
		if( document.getElementById('slct').selectedIndex == 0)
		{
			ShowMessage("Please select a valid unit!");
		}
		else
		{
			if(value == "")
			{
				ShowMessage("Please enter a value!")
			}
			else if(!(Number(value)))
			{
				ShowMessage("Please enter a number!")
			}
			else
			{
				if(value==27121571)
				{
				 	window.location.href = 'https://en.wikipedia.org/wiki/Johannes_Kepler';
				}
				else
				{
					processRequest(value, selectedUnit);
				}				
			}
		}
	}

	function ShowMessage( text, displayType )
	{
		DisplayResult(text, displayType)

	}

	function ShowMessage( text)
	{
		DisplayResult(text, "")
	}
	
	function processRequest( value, unit)
	{
		$(function() 
		{
    		
      		$.getJSON($SCRIPT_ROOT + '/compare', 
      		{
        		v: value,
        		u: unit
      		}, function(data) 
      		{
      			handleResponse(data);
      			return false;
    		});
  		});
	}

	function handleResponse(response)
	{
		DisplayResult(response.result, "result");
	}

	function DisplayResult( text, displayType )
	{
		if(displayType.toString() == "result")
		{
			document.getElementById('display_result').innerHTML = text.toString();
		}	
		else
		{
			document.getElementById('display_result').innerHTML = text.toString();
		}
	}


</script>
<!-- $("#result").text(data.result); -->

</html>